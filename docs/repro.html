<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 2 Reproducible Workflows | Data Skills for Reproducible Research</title>
<meta name="description" content="2.1 Learning Objectives Organise a project (video) Create and compile an Rmarkdown document (video) Edit the YAML header to add table of contents and other options Include a table Include a figure...">
<meta name="generator" content="bookdown 0.27 with bs4_book()">
<meta property="og:title" content="Chapter 2 Reproducible Workflows | Data Skills for Reproducible Research">
<meta property="og:type" content="book">
<meta property="og:url" content="https://psyteachr.github.io/reprores-v3/repro.html">
<meta property="og:image" content="https://psyteachr.github.io/reprores-v3/images/logos/logo.png">
<meta property="og:description" content="2.1 Learning Objectives Organise a project (video) Create and compile an Rmarkdown document (video) Edit the YAML header to add table of contents and other options Include a table Include a figure...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 2 Reproducible Workflows | Data Skills for Reproducible Research">
<meta name="twitter:description" content="2.1 Learning Objectives Organise a project (video) Create and compile an Rmarkdown document (video) Edit the YAML header to add table of contents and other options Include a table Include a figure...">
<meta name="twitter:image" content="https://psyteachr.github.io/reprores-v3/images/logos/logo.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.23/datatables.js"></script><link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="libs/plotly-binding-4.10.0/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-6NP3MF25W3');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/psyteachr.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="&lt;br&gt;&lt;a href='https://doi.org/10.5281/zenodo.6527194'&gt;&lt;img src='https://zenodo.org/badge/DOI/10.5281/zenodo.6527194.svg' alt='DOI: 10.5281/zenodo.6527194'&gt;&lt;/a&gt;">Data Skills for Reproducible Research</a>:
        <small class="text-muted"><br><a href="https://doi.org/10.5281/zenodo.6527194"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.6527194.svg" alt="DOI: 10.5281/zenodo.6527194"></a></small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Overview</a></li>
<li><a class="" href="intro.html"><span class="header-section-number">1</span> Getting Started</a></li>
<li><a class="active" href="repro.html"><span class="header-section-number">2</span> Reproducible Workflows</a></li>
<li><a class="" href="ggplot.html"><span class="header-section-number">3</span> Data Visualisation</a></li>
<li><a class="" href="data.html"><span class="header-section-number">4</span> Working with Data</a></li>
<li><a class="" href="joins.html"><span class="header-section-number">5</span> Data Relations</a></li>
<li><a class="" href="tidyr.html"><span class="header-section-number">6</span> Tidy Data</a></li>
<li><a class="" href="dplyr.html"><span class="header-section-number">7</span> Data Wrangling</a></li>
<li><a class="" href="func.html"><span class="header-section-number">8</span> Iteration &amp; Functions</a></li>
<li><a class="" href="sim.html"><span class="header-section-number">9</span> Probability &amp; Simulation</a></li>
<li><a class="" href="next.html"><span class="header-section-number">10</span> Next Steps</a></li>
<li><a class="" href="acknowledgements.html">Acknowledgements</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="installingr.html"><span class="header-section-number">A</span> Installing and Updating</a></li>
<li><a class="" href="getting-help.html"><span class="header-section-number">B</span> Getting Help</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/psyteachr/reprores-v3">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="repro" class="section level1" number="2">
<h1>
<span class="header-section-number">2</span> Reproducible Workflows<a class="anchor" aria-label="anchor" href="#repro"><i class="fas fa-link"></i></a>
</h1>
<div class="right meme">
<img src="images/memes/repro_reports.jpg" alt="Top left: young spongebob; top right: Using Base R for your analysis and copy pasting your results into tables in Word; middle left: older angry spongebob in workout clothes; middle right: learning how to use dplyr visualize data with ggplot2 and report your analysis in rmarkdown documents; bottom left: muscular spongebob shirtless in a boxing ring; bottom right: wielding the entire might of the tidyverse (with 50 hex stickers)">
</div>
<div id="ilo-repro" class="section level2" number="2.1">
<h2>
<span class="header-section-number">2.1</span> Learning Objectives<a class="anchor" aria-label="anchor" href="#ilo-repro"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>Organise a <a href="repro.html#projects">project</a> <a href="https://youtu.be/y-KiPueC9xw" class="video">(video)</a>
</li>
<li>Create and compile an <a href="#rmarkdown">Rmarkdown document</a> <a href="https://youtu.be/EqJiAlJAl8Y" class="video">(video)</a>
</li>
<li>Edit the <a href="repro.html#yaml">YAML header</a> to add table of contents and other options</li>
<li>Include a <a href="repro.html#repro-tables">table</a>
</li>
<li>Include a <a href="repro.html#repro-figures">figure</a>
</li>
<li>Report the output of an analysis using <a href="repro.html#inline-r">inline R</a>
</li>
<li>Add a <a href="repro.html#bibliography">bibliography</a> and <a href="repro.html#citations">citations</a>
</li>
</ol>
</div>
<div id="setup-repro" class="section level2" number="2.2">
<h2>
<span class="header-section-number">2.2</span> Setup<a class="anchor" aria-label="anchor" href="#setup-repro"><i class="fas fa-link"></i></a>
</h2>
<p>You will be given instructions in Section <a href="repro.html#new-project">2.4.4</a> below to set up a new project where you will keep all of your class notes. Section <a href="repro.html#r-markdown">2.5</a> gives instructions to set up an R Markdown script for this chapter.</p>
<p>For reference, here are the packages we will use in this chapter.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># packages needed for this chapter</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>  <span class="co"># various data manipulation functions</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/">knitr</a></span><span class="op">)</span>      <span class="co"># for table and image display</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span> <span class="co"># for styling tables</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/crsh/papaja">papaja</a></span><span class="op">)</span>     <span class="co"># for APA-style tables</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com/">gt</a></span><span class="op">)</span>         <span class="co"># for fancy tables</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/DT">DT</a></span><span class="op">)</span>         <span class="co"># for interactive tables</span></span></code></pre></div>
<p>Download the <a href="https://www.rstudio.org/links/r_markdown_cheat_sheet">R Markdown Cheat Sheet</a>.</p>
</div>
<div id="why-learn-reproducible-reports" class="section level2" number="2.3">
<h2>
<span class="header-section-number">2.3</span> Why learn reproducible reports?<a class="anchor" aria-label="anchor" href="#why-learn-reproducible-reports"><i class="fas fa-link"></i></a>
</h2>
<p>Have you ever worked on a report, creating a summary table for the demographics, making beautiful plots, getting the analysis just right, and copying all the relevant numbers into your manuscript, only to find out that you forgot to exclude a test run and have to redo everything?</p>
<p>A<a class="glossary" target="_blank" title="The extent to which the findings of a study can be repeated in some other context" href="https://psyteachr.github.io/glossary/r#reproducibility">reproducible</a> report fixes this problem. Although this requires a bit of extra effort at the start, it will more than pay you back by allowing you to update your entire report with the push of a button whenever anything changes.</p>
<p>Studies also show that many, if not most, papers in the scientific literature have reporting errors. For example, more than half of over 250,000 psychology papers published between 1985 and 2013 have at least one value that is statistically incompatible (e.g., a p-value that is not possible given a t-value and degrees of freedom) <span class="citation">(<a href="webpages.html#ref-nuijten2016prevalence" role="doc-biblioref">Nuijten et al., 2016</a>)</span>. Reproducible reports help avoid transcription and rounding errors.</p>
<p>We will make reproducible reports following the principles of <a href="https://en.wikipedia.org/wiki/Literate_programming">literate programming</a>. The basic idea is to have the text of the report together in a single document along with the code needed to perform all analyses and generate the tables. The report is then "compiled" from the original format into some other, more portable format, such as HTML or PDF. This is different from traditional cutting and pasting approaches where, for instance, you create a graph in Microsoft Excel or a statistics program like SPSS and then paste it into Microsoft Word.</p>
</div>
<div id="projects" class="section level2" number="2.4">
<h2>
<span class="header-section-number">2.4</span> Organising a project<a class="anchor" aria-label="anchor" href="#projects"><i class="fas fa-link"></i></a>
</h2>
<p>First, we need to get organised. <a class="glossary" target="_blank" title="A way to organise related files in RStudio" href="https://psyteachr.github.io/glossary/p#project">Projects</a> in RStudio are a way to group all of the files you need for one project. Most projects include scripts, data files, and output files like the PDF report created by the script or images.</p>
<div id="file-system" class="section level3" number="2.4.1">
<h3>
<span class="header-section-number">2.4.1</span> File System<a class="anchor" aria-label="anchor" href="#file-system"><i class="fas fa-link"></i></a>
</h3>
<p>Modern computers tend to hide the file system from users, but we need to understand a little bit about how files are stored on your computer in order to get a script to find your data. Your computer's file system is like a big box (or <a class="glossary" target="_blank" title='A collection or "folder" of files on a computer.' href="https://psyteachr.github.io/glossary/d#directory">directory</a>) that contains both files and smaller boxes, or "subdirectories". You can specify the location of a file with its name and the names of all the directories it is inside.</p>
<p>For example, if Lisa is looking for a file called <code>report.Rmd</code>on their Desktop, they can specify the full file <a class="glossary" target="_blank" title="A string representing the location of a file or directory." href="https://psyteachr.github.io/glossary/p#path">path</a> like this: <code>/Users/lisad/Desktop/report.Rmd</code>, because the <code>Desktop</code> directory is inside the <code>lisad</code> directory, which is inside the <code>Users</code> directory, which is located at the base of the whole file system. If that file was on <em>your</em> desktop, you would probably have a different path unless your user directory is also called <code>lisad</code>. You can also use the <code>~</code> shortcut to represent the user directory of the person who is currently logged in, like this: <code>~/Desktop/report.Rmd</code>.</p>
</div>
<div id="working-directory" class="section level3" number="2.4.2">
<h3>
<span class="header-section-number">2.4.2</span> Working Directory<a class="anchor" aria-label="anchor" href="#working-directory"><i class="fas fa-link"></i></a>
</h3>
<p>Where should you put all of your files? You usually want to have all of your scripts and data files for a single project inside one folder on your computer, the <a class="glossary" target="_blank" title="The filepath where R is currently reading and writing files." href="https://psyteachr.github.io/glossary/w#working-directory">working directory</a> for that project. You can organise files in subdirectories inside this main project directory, such as putting all raw data files in a directory called <code class="path">data</code> and saving any image files to a directory called <code class="path">images</code>.</p>
<p>Your script should only reference files in three locations, using the appropriate format.</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="28%">
<col width="71%">
</colgroup>
<thead><tr class="header">
<th>Where</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>on the web</td>
<td>"<a href="https://psyteachr.github.io/reprores-v3/data/5factor.xlsx" class="uri">https://psyteachr.github.io/reprores-v3/data/5factor.xlsx</a>"</td>
</tr>
<tr class="even">
<td>in the working directory</td>
<td>"5factor.xlsx"</td>
</tr>
<tr class="odd">
<td>in a subdirectory</td>
<td>"data/5factor.xlsx"</td>
</tr>
</tbody>
</table></div>
<div class="warning">
<p>Never set or change your working directory in a script.</p>
</div>
<p>R Markdown files will automatically use the same directory the .Rmd file is in as the working directory.</p>
<p>If your script needs a file in a subdirectory of your working directory, such as, <code class="path">data/5factor.xlsx</code>, load it in using a <a class="glossary" target="_blank" title="The location of a file in relation to the working directory." href="https://psyteachr.github.io/glossary/r#relative-path">relative path</a> so that it is accessible if you move the working directory to another location or computer:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"data/5factor.xlsx"</span><span class="op">)</span>  <span class="co"># correct</span></span></code></pre></div>
<p>Do not load it in using an <a class="glossary" target="_blank" title="A file path that starts with / and is not appended to the working directory" href="https://psyteachr.github.io/glossary/a#absolute-path">absolute path</a>:</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"C:/My Files/2020-2021/data/5factor.xlsx"</span><span class="op">)</span>   <span class="co"># wrong</span></span></code></pre></div>
<div class="info">
<p>Also note the convention of using forward slashes, unlike the Windows-specific convention of using backward slashes. This is to make references to files work for everyone, regardless of their operating system.</p>
</div>
</div>
<div id="naming-things" class="section level3" number="2.4.3">
<h3>
<span class="header-section-number">2.4.3</span> Naming Things<a class="anchor" aria-label="anchor" href="#naming-things"><i class="fas fa-link"></i></a>
</h3>
<p>Name files so that both people and computers can easily find things. Here are some important principles:</p>
<ul>
<li>file and directory names should only contain letters, numbers, dashes, and underscores, with a full stop (<code>.</code>) between the file name and <a class="glossary" target="_blank" title="The end part of a file name that tells you what type of file it is (e.g., .R or .Rmd)." href="https://psyteachr.github.io/glossary/e#extension">extension</a> (that means no spaces!)</li>
<li>be consistent with capitalisation (set a rule to make it easy to remember, like always use lowercase)</li>
<li>use underscores (<code>_</code>) to separate parts of the file name, and dashes (<code>-</code>) to separate words in a section</li>
<li>name files with a pattern that alphabetises in a sensible order and makes it easy for you to find the file you're looking for</li>
<li>prefix a filename with an underscore to move it to the top of the list, or prefix all files with numbers to control their order</li>
</ul>
<p>For example, these file names are a mess:</p>
<ul>
<li><code class="path">report.doc</code></li>
<li><code class="path">report final.doc</code></li>
<li><code class="path">Data (Participants) 11-15.xls</code></li>
<li><code class="path">Participants Data Nov 12.xls</code></li>
<li><code class="path">final report2.doc</code></li>
<li><code class="path">project notes.txt</code></li>
<li><code class="path">Questionnaire Data November 15.xls</code></li>
</ul>
<p>Here is one way to structure them so that similar files have the same structure and it's easy for a human to scan the list or to use code to find relevant files. See if you can figure out what the last one should be.</p>
<ul>
<li><code class="path">_project-notes.txt</code></li>
<li><code class="path">report_v1.doc</code></li>
<li><code class="path">report_v2.doc</code></li>
<li><code class="path">report_v3.doc</code></li>
<li><code class="path">data_participants_2021-11-12.xls</code></li>
<li><code class="path">data_participants_2021-11-15.xls</code></li>
<li><select class="webex-select"><option value="blank"></option>
<option value="">questionnaire-data_2021-11-15.xls</option>
<option value="">data-questionnaire-2021_11_15.xls</option>
<option value="answer">data_questionnaire_2021-11-15.xls</option>
<option value="">data_2021-11-15_questionnaire.xls</option></select></li>
</ul>
<div class="try">
<p>Think of other ways to name the files above. Look at some of your own project files and see what you can improve.</p>
</div>
</div>
<div id="new-project" class="section level3" number="2.4.4">
<h3>
<span class="header-section-number">2.4.4</span> Start a Project<a class="anchor" aria-label="anchor" href="#new-project"><i class="fas fa-link"></i></a>
</h3>
<p>Now that we understand how the file system work and how to name things to make it easier for scripts to access them, we're ready to make our class project.</p>
<p>First, make a new <a class="glossary" target="_blank" title='A collection or "folder" of files on a computer.' href="https://psyteachr.github.io/glossary/d#directory">directory</a> where you will keep all of your materials for this class (I called mine <code>reprores-2022</code>). You can set this directory to be the default working directory under the General tab of the Global Options. This means that files will be saved here by default if you aren't working in a project.</p>
<div class="warning">
<p>It can sometimes cause problems if this directory is in OneDrive or if the full file path has special characters or is <a href="http://handbook.datalad.org/en/latest/intro/filenaming.html" target="_blank">more than 260 characters</a> on some Windows machines.</p>
</div>
<p>Next, choose <strong><code>New Project...</code></strong> under the <strong><code>File</code></strong> menu to create a new project called <code class="path">reprores-class-notes</code>. Make sure you save it inside the directory you just made. RStudio will restart itself and open with this new project directory as the working directory.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">include_graphics</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"images/repro/new_proj_1.png"</span>,</span>
<span>                   <span class="st">"images/repro/new_proj_2.png"</span>,</span>
<span>                   <span class="st">"images/repro/new_proj_3.png"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-1-1"></span>
<img src="images/repro/new_proj_1.png" alt="Starting a new project." width="100%"><p class="caption">
Figure 2.1: Starting a new project.
</p>
</div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-1-2"></span>
<img src="images/repro/new_proj_2.png" alt="Starting a new project." width="100%"><p class="caption">
Figure 2.2: Starting a new project.
</p>
</div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-1-3"></span>
<img src="images/repro/new_proj_3.png" alt="Starting a new project." width="100%"><p class="caption">
Figure 2.3: Starting a new project.
</p>
</div>
<p>Click on the Files tab in the lower right pane to see the contents of the project directory. You will see a file called <code>reprores-class-notes.Rproj</code>, which is a file that contains all of the project information.You can double-click on it to open up the project.</p>
<div class="info">
<p>Depending on your settings, you may also see a directory called <code>.Rproj.user</code>, which contains your specific user settings. You can ignore this and other "invisible" files that start with a full stop.</p>
</div>
</div>
</div>
<div id="r-markdown" class="section level2" number="2.5">
<h2>
<span class="header-section-number">2.5</span> R Markdown<a class="anchor" aria-label="anchor" href="#r-markdown"><i class="fas fa-link"></i></a>
</h2>
<p>In this lesson, we will learn to make an R Markdown document with a table of contents, appropriate headers, code chunks, tables, images, inline R, and a bibliography.</p>
<div class="info">
<p>There is a new type of reproducible report format called <a href="https://quarto.org/" target="_blank">quarto</a> that is very similar to R Markdown. We won't be using quarto in this class because it has a few small differences that get confusing if you're learning both quarto and R Markdown at the same time, but you should be able to pick up quarto very easily once you've learned R Markdown.</p>
</div>
<p>We will use <a class="glossary" target="_blank" title="The R-specific version of markdown: a way to specify formatting, such as headers, paragraphs, lists, bolding, and links, as well as code blocks and inline code." href="https://psyteachr.github.io/glossary/r#r-markdown">R Markdown</a> to create reproducible reports, which enables mixing of text and code. A reproducible script will contain sections of code in code blocks. A code block starts and ends with three backtick symbols in a row, with some information about the code between curly brackets, such as <code>{r chunk-name, echo=FALSE}</code> (this runs the code, but does not show the text of the code block in the compiled document). The text outside of code blocks is written in <a class="glossary" target="_blank" title="A way to specify formatting, such as headers, paragraphs, lists, bolding, and links." href="https://psyteachr.github.io/glossary/m#markdown">markdown</a>, which is a way to specify formatting, such as headers, paragraphs, lists, bolding, and links.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:img-reproducible-script"></span>
<img src="images/repro/reproducible_script.png" alt="A screenshot of a script with line numbers, code blocks, and markdown text" width="100%"><p class="caption">
Figure 2.4: A reproducible script.
</p>
</div>
<p>If you open up a new R Markdown file from a template, you will see an example document with several code blocks in it. To create an HTML or PDF report from an R Markdown (Rmd) document, you compile it. Compiling a document is called <a class="glossary" target="_blank" title="To create an HTML, PDF, or Word document from an R Markdown (Rmd) document" href="https://psyteachr.github.io/glossary/k#knit">knitting</a> in RStudio. There is a button that looks like a ball of yarn with needles through it that you click on to compile your file into a report.</p>
<div class="try">
<p>Create a new R Markdown file from the <strong><code>File &gt; New File &gt; R Markdown...</code></strong> menu. Change the title and author, save the file as <code>02-repro.Rmd</code>, then click the knit button to create an html file.</p>
</div>
<div id="yaml" class="section level3" number="2.5.1">
<h3>
<span class="header-section-number">2.5.1</span> YAML Header<a class="anchor" aria-label="anchor" href="#yaml"><i class="fas fa-link"></i></a>
</h3>
<p>The <a class="glossary" target="_blank" title="A structured format for information" href="https://psyteachr.github.io/glossary/y#yaml">YAML</a> header is where you can set several options.</p>
<pre><code>---
title: "My Demo Document"
author: "Me"
output:
  html_document:
    toc: true
    toc_float:
      collapsed: false
      smooth_scroll: false
    number_sections: false
bibliography: refs.bib
csl: apa.csl
---</code></pre>
<div class="info">
<p>Try changing the values from <code>false</code> to <code>true</code> to see what the options do.</p>
</div>
<p>The <code>df_print: kable</code> option prints data frames using <code><a href="https://rdrr.io/pkg/knitr/man/kable.html">knitr::kable</a></code>. You'll learn below how to further customise tables.</p>
<p>The built-in bootswatch themes are: default, cerulean, cosmo, darkly, flatly, journal, lumen, paper, readable, sandstone, simplex, spacelab, united, and yeti. You can <a href="https://bootswatch.com/4/">view and download more themes</a>.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:img-bootswatch"></span>
<img src="images/repro/bootswatch.png" alt="Light themes in versions 3 and 4." width="100%"><p class="caption">
Figure 2.5: Light themes in versions 3 and 4.
</p>
</div>
</div>
<div id="setup" class="section level3" number="2.5.2">
<h3>
<span class="header-section-number">2.5.2</span> Setup<a class="anchor" aria-label="anchor" href="#setup"><i class="fas fa-link"></i></a>
</h3>
<p>When you create a new R Markdown file in RStudio using the default template, a setup chunk is automatically created.</p>
<div class="verbatim">
<pre class="sourceCode r"><code class="sourceCode R">```{r setup, include=FALSE}</code></pre>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html">opts_chunk</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span>echo <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre class="sourceCode r"><code class="sourceCode R">```</code></pre>
</div>
<p>You can set more default options for code chunks here. See the <a href="https://yihui.name/knitr/options/" target="_blank">knitr options documentation</a> for explanations of the possible options.</p>
<div class="verbatim">
<pre class="sourceCode r"><code class="sourceCode R">```{r setup, include=FALSE}</code></pre>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html">opts_chunk</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span></span>
<span>  fig.width  <span class="op">=</span> <span class="fl">8</span>, </span>
<span>  fig.height <span class="op">=</span> <span class="fl">5</span>, </span>
<span>  fig.path   <span class="op">=</span> <span class="st">'images/'</span>,</span>
<span>  echo       <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>  warning    <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>  message    <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cache      <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre class="sourceCode r"><code class="sourceCode R">```</code></pre>
</div>
<p>The code above sets the following options:</p>
<ul>
<li>
<code>fig.width  = 8</code> : default figure width is 8 inches (you can change this for individual figures)</li>
<li>
<code>fig.height = 5</code> : default figure height is 5 inches</li>
<li>
<code>fig.path   = 'images/'</code> : figures are saved in the directory "images"</li>
<li>
<code>echo       = FALSE</code> : do not show code chunks in the rendered document</li>
<li>
<code>warning    = FALSE</code> : do not show any function warnings</li>
<li>
<code>message    = FALSE</code> : do not show any function messages</li>
<li>
<code>cache      = FALSE</code> : run all the code to create all of the images and objects each time you knit (set to <code>TRUE</code> if you have time-consuming code)</li>
</ul>
<p>Find a list of the current chunk options by typing <code><span><span class="fu"><a target="_blank" href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a target="_blank" href="https://rdrr.io/pkg/knitr/man/opts_chunk.html">opts_chunk</a></span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code> in the console.</p>
<p>You can also add the packages you need in this chunk using <code><span><span class="kw"><a target="_blank" href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="op">)</span></span></code>. Often when you are working on a script, you will realize that you need to load another add-on package. Don't bury the call to <code><a href="https://rdrr.io/r/base/library.html">library(package_I_need)</a></code> way down in the script. Put it in the top, so the user has an overview of what packages are needed.</p>
<div class="try">
<p>We'll be using function from the package <code class="package">tidyverse</code>, so load that in your setup chunk.</p>
</div>
</div>
<div id="structure" class="section level3" number="2.5.3">
<h3>
<span class="header-section-number">2.5.3</span> Structure<a class="anchor" aria-label="anchor" href="#structure"><i class="fas fa-link"></i></a>
</h3>
<p>If you include a table of contents (<code>toc</code>), it is created from your document headers. Headers in <a class="glossary" target="_blank" title="A way to specify formatting, such as headers, paragraphs, lists, bolding, and links." href="https://psyteachr.github.io/glossary/m#markdown">markdown</a> are created by prefacing the header title with one or more hashes (<code>#</code>).</p>
<p>Use the following structure when developing your own analysis scripts:</p>
<ul>
<li>load in any add-on packages you need to use</li>
<li>define any custom functions</li>
<li>load or simulate the data you will be working with</li>
<li>work with the data</li>
<li>save anything you need to save</li>
</ul>
<div class="try">
<p>Delete the default text and add some structure to your document by creating headers and subheaders. We're going to load some data, create a summary table, plot the data, and analyse it.</p>
</div>
</div>
<div id="code-chunks" class="section level3" number="2.5.4">
<h3>
<span class="header-section-number">2.5.4</span> Code Chunks<a class="anchor" aria-label="anchor" href="#code-chunks"><i class="fas fa-link"></i></a>
</h3>
<p>You can include <a class="glossary" target="_blank" title="A section of code in an R Markdown file" href="https://psyteachr.github.io/glossary/c#chunk">code chunks</a> that create and display images, tables, or computations to include in your text. Let's start by loading some data.</p>
<p>First, create a code chunk in your document. This code loads some data from the web.</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://psyteachr.github.io/reprores/data/pets.csv"</span>,</span>
<span>                 show_col_types <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>You can add comments inside R chunks with the hash symbol (<code>#</code>). The R interpreter will ignore characters from the hash to the end of the line.</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># simulating new data</span></span>
<span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">pets</span><span class="op">)</span> <span class="co"># the total number of pet</span></span>
<span><span class="va">mu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">pets</span><span class="op">$</span><span class="va">score</span><span class="op">)</span> <span class="co"># the mean score for all pets</span></span>
<span><span class="va">sd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pets</span><span class="op">$</span><span class="va">score</span><span class="op">)</span> <span class="co"># the SD for score for all pets</span></span>
<span></span>
<span><span class="va">simulated_scores</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">mu</span>, <span class="va">sd</span><span class="op">)</span></span></code></pre></div>
<p>It's usually good practice to start a code chunk with a comment that explains what you're doing there, especially if the code is not explained in the text of the report.</p>
<p>If you name your objects clearly, you often don't need to add clarifying comments. For example, if I'd named the three objects above <code>total_pet_n</code>, <code>mean_score</code> and <code>sd_score</code>, I would omit the comments.</p>
<p>It's a bit of an art to comment your code well. The best way to develop this skill is to read a lot of other people's code and have others review your code.</p>
</div>
<div id="inline-r" class="section level3" number="2.5.5">
<h3>
<span class="header-section-number">2.5.5</span> In-line R<a class="anchor" aria-label="anchor" href="#inline-r"><i class="fas fa-link"></i></a>
</h3>
<p>Now let's analyse the pets data to see if cats are heavier than ferrets. First we'll run the analysis code. Then we'll save any numbers we might want to use in our manuscript to variables and round them appropriately. Finally, we'll use <code><span><span class="fu">glue</span><span class="fu">::</span><span class="fu"><a target="_blank" href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="op">)</span></span></code> to format a results string.</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># analysis</span></span>
<span><span class="va">cat_weight</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">pets</span>, <span class="va">pet</span> <span class="op">==</span> <span class="st">"cat"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span></span>
<span><span class="va">ferret_weight</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">pets</span>, <span class="va">pet</span> <span class="op">==</span> <span class="st">"ferret"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span></span>
<span><span class="va">weight_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/t.test.html">t.test</a></span><span class="op">(</span><span class="va">cat_weight</span>, <span class="va">ferret_weight</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># round individual values you want to report</span></span>
<span><span class="va">t</span> <span class="op">&lt;-</span> <span class="va">weight_test</span><span class="op">$</span><span class="va">statistic</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">weight_test</span><span class="op">$</span><span class="va">parameter</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">weight_test</span><span class="op">$</span><span class="va">p.value</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co"># handle p-values &lt; .001</span></span>
<span><span class="va">p_symbol</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">p</span> <span class="op">&lt;</span> <span class="fl">.001</span>, <span class="st">"&lt;"</span>, <span class="st">"="</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">p</span> <span class="op">&lt;</span> <span class="fl">.001</span><span class="op">)</span> <span class="va">p</span> <span class="op">&lt;-</span> <span class="fl">.001</span></span>
<span></span>
<span><span class="co"># format the results string</span></span>
<span><span class="va">weight_result</span> <span class="op">&lt;-</span> <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"t = {t}, df = {df}, p {p_symbol} {p}"</span><span class="op">)</span></span></code></pre></div>
<p>You can insert the results into a paragraph with inline R code that looks like this:</p>
<pre><code>Cats were significantly heavier than ferrets (`r weight_result`).</code></pre>
<p><strong>Rendered text:</strong><br>
Cats were significantly heavier than ferrets (t = 18.42, df = 180.4, p &lt; 0.001).</p>
</div>
<div id="repro-tables" class="section level3" number="2.5.6">
<h3>
<span class="header-section-number">2.5.6</span> Tables<a class="anchor" aria-label="anchor" href="#repro-tables"><i class="fas fa-link"></i></a>
</h3>
<p>Next, create a code chunk where you want to display a table of the descriptives (e.g., Participants section of the Methods). We'll use tidyverse functions you will learn in the <a href="tidyr.html#tidyr">data wrangling lectures</a> to create summary statistics for each group.</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">summary_table</span> <span class="op">&lt;-</span> <span class="va">pets</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">pet</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    mean_weight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span>,</span>
<span>    mean_score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">score</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># print</span></span>
<span><span class="va">summary_table</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:left;">
pet
</th>
<th style="text-align:right;">
n
</th>
<th style="text-align:right;">
mean_weight
</th>
<th style="text-align:right;">
mean_score
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
cat
</td>
<td style="text-align:right;">
300
</td>
<td style="text-align:right;">
9.371613
</td>
<td style="text-align:right;">
90.23667
</td>
</tr>
<tr>
<td style="text-align:left;">
dog
</td>
<td style="text-align:right;">
400
</td>
<td style="text-align:right;">
19.067974
</td>
<td style="text-align:right;">
99.98250
</td>
</tr>
<tr>
<td style="text-align:left;">
ferret
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
4.781569
</td>
<td style="text-align:right;">
111.78000
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="warning">
<p>The table above will print in tibble format in the interactive view, but will use the format from the <code>df_print</code> setting in the YAML header when you knit.</p>
</div>
<p>The table above is OK, but it could be more reader-friendly by changing the column labels, rounding the means, and adding a caption. You can use <code><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a target="_blank" href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span></span></code> for this, or more specialised functions from other packages to format your tables.</p>
<!-- Tab links -->
<div class="tab">
<p><button class="tablinks" onclick="openCity(event, 'knitr')">knitr</button>
<button class="tablinks" onclick="openCity(event, 'kableExtra')">kableExtra</button>
<button class="tablinks" onclick="openCity(event, 'papaja')">papaja</button>
<button class="tablinks" onclick="openCity(event, 'gt')">gt</button>
<button class="tablinks" onclick="openCity(event, 'DT')">DT</button></p>
</div>
<!-- Tab content -->
<div id="knitr" class="tabcontent">
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">newnames</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Pet Type"</span>, <span class="st">"N"</span>, <span class="st">"Mean Weight"</span>, <span class="st">"Mean Score"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">summary_table</span>, </span>
<span>             digits <span class="op">=</span> <span class="fl">2</span>, </span>
<span>             col.names <span class="op">=</span> <span class="va">newnames</span>,</span>
<span>             caption <span class="op">=</span> <span class="st">"Summary statistics for the pets dataset."</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:kable-demo">Table 2.1: </span>Summary statistics for the pets dataset.
</caption>
<thead><tr>
<th style="text-align:left;">
Pet Type
</th>
<th style="text-align:right;">
N
</th>
<th style="text-align:right;">
Mean Weight
</th>
<th style="text-align:right;">
Mean Score
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
cat
</td>
<td style="text-align:right;">
300
</td>
<td style="text-align:right;">
9.37
</td>
<td style="text-align:right;">
90.24
</td>
</tr>
<tr>
<td style="text-align:left;">
dog
</td>
<td style="text-align:right;">
400
</td>
<td style="text-align:right;">
19.07
</td>
<td style="text-align:right;">
99.98
</td>
</tr>
<tr>
<td style="text-align:left;">
ferret
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
4.78
</td>
<td style="text-align:right;">
111.78
</td>
</tr>
</tbody>
</table></div>
</div>
<!-- Tab content -->
<div id="kableExtra" class="tabcontent">
<p>The <a href="https://haozhu233.github.io/kableExtra/awesome_table_in_html.html">kableExtra</a> package gives you a lot of flexibility with table display.</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">summary_table</span>, </span>
<span>      digits <span class="op">=</span> <span class="fl">2</span>, </span>
<span>      col.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Pet Type"</span>, <span class="st">"N"</span>, <span class="st">"Weight"</span>, <span class="st">"Score"</span><span class="op">)</span>,</span>
<span>      caption <span class="op">=</span> <span class="st">"Summary statistics for the pets dataset."</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_classic.html">kable_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">FALSE</span>, font_size <span class="op">=</span> <span class="fl">20</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/add_header_above.html">add_header_above</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">" "</span> <span class="op">=</span> <span class="fl">2</span>, <span class="st">"Means"</span> <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/row_spec.html">row_spec</a></span><span class="op">(</span><span class="fl">2</span>, bold <span class="op">=</span> <span class="cn">TRUE</span>, background <span class="op">=</span> <span class="st">"lightyellow"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class=" lightable-classic table" style='font-family: "Arial Narrow", "Source Sans Pro", sans-serif; margin-left: auto; margin-right: auto; font-size: 20px; width: auto !important; margin-left: auto; margin-right: auto;'>
<caption style="font-size: initial !important;">
<span id="tab:kableExtra-demo">Table 2.2: </span>Summary statistics for the pets dataset.
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="2">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Means
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
Pet Type
</th>
<th style="text-align:right;">
N
</th>
<th style="text-align:right;">
Weight
</th>
<th style="text-align:right;">
Score
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
cat
</td>
<td style="text-align:right;">
300
</td>
<td style="text-align:right;">
9.37
</td>
<td style="text-align:right;">
90.24
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;background-color: lightyellow !important;">
dog
</td>
<td style="text-align:right;font-weight: bold;background-color: lightyellow !important;">
400
</td>
<td style="text-align:right;font-weight: bold;background-color: lightyellow !important;">
19.07
</td>
<td style="text-align:right;font-weight: bold;background-color: lightyellow !important;">
99.98
</td>
</tr>
<tr>
<td style="text-align:left;">
ferret
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
4.78
</td>
<td style="text-align:right;">
111.78
</td>
</tr>
</tbody>
</table></div>
</div>
<!-- Tab content -->
<div id="papaja" class="tabcontent">
<p><a href="https://crsh.github.io/papaja_man/reporting.html#tables">papaja</a> helps you create APA-formatted manuscripts, including tables.</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">papaja</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/papaja/man/apa_table.html">apa_table</a></span><span class="op">(</span><span class="va">summary_table</span>, </span>
<span>                  col.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Pet Type"</span>, <span class="st">"N"</span>, <span class="st">"Weight"</span>, <span class="st">"Score"</span><span class="op">)</span>,</span>
<span>                  caption <span class="op">=</span> <span class="st">"Summary statistics for the pets dataset."</span>,</span>
<span>                  col_spanners <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Means"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<caption>
<span id="tab:papaja-demo">Table 2.3: </span>
</caption>
<div custom-style="Table Caption">
<em>Summary statistics for the pets dataset.</em>
</div>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">Pet Type</th>
<th align="left">N</th>
<th align="left">Weight</th>
<th align="left">Score</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">cat</td>
<td align="left">300</td>
<td align="left">9.37</td>
<td align="left">90.24</td>
</tr>
<tr class="even">
<td align="left">dog</td>
<td align="left">400</td>
<td align="left">19.07</td>
<td align="left">99.98</td>
</tr>
<tr class="odd">
<td align="left">ferret</td>
<td align="left">100</td>
<td align="left">4.78</td>
<td align="left">111.78</td>
</tr>
</tbody>
</table></div>
</div>
<!-- Tab content -->
<div id="gt" class="tabcontent">
<p>The <a href="https://gt.rstudio.com/index.html">gt</a> package allows for even more customisation.</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com/">gt</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="va">summary_table</span>, caption <span class="op">=</span> <span class="st">"Summary statistics for the pets dataset."</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_number.html">fmt_number</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">mean_weight</span>, <span class="va">mean_score</span><span class="op">)</span>,</span>
<span>            decimals <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/cols_label.html">cols_label</a></span><span class="op">(</span>pet <span class="op">=</span> <span class="st">"Pet Type"</span>, </span>
<span>             n <span class="op">=</span> <span class="st">"N"</span>, </span>
<span>             mean_weight <span class="op">=</span> <span class="st">"Weight"</span>, </span>
<span>             mean_score <span class="op">=</span> <span class="st">"Score"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_spanner.html">tab_spanner</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Means"</span>,</span>
<span>              columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">mean_weight</span>, <span class="va">mean_score</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span> <span class="fu"><a href="https://gt.rstudio.com/reference/opt_stylize.html">opt_stylize</a></span><span class="op">(</span>style <span class="op">=</span> <span class="fl">6</span>, color <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span></code></pre></div>
<div id="pxyzclwvzy" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#pxyzclwvzy .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#pxyzclwvzy .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pxyzclwvzy .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#pxyzclwvzy .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#pxyzclwvzy .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#pxyzclwvzy .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pxyzclwvzy .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#pxyzclwvzy .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#pxyzclwvzy .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#pxyzclwvzy .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#pxyzclwvzy .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#pxyzclwvzy .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#pxyzclwvzy .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#pxyzclwvzy .gt_from_md > :first-child {
  margin-top: 0;
}

#pxyzclwvzy .gt_from_md > :last-child {
  margin-bottom: 0;
}

#pxyzclwvzy .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#pxyzclwvzy .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#pxyzclwvzy .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#pxyzclwvzy .gt_row_group_first td {
  border-top-width: 2px;
}

#pxyzclwvzy .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pxyzclwvzy .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#pxyzclwvzy .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#pxyzclwvzy .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#pxyzclwvzy .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pxyzclwvzy .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#pxyzclwvzy .gt_striped {
  background-color: #EDF7FC;
}

#pxyzclwvzy .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#pxyzclwvzy .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pxyzclwvzy .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pxyzclwvzy .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pxyzclwvzy .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pxyzclwvzy .gt_left {
  text-align: left;
}

#pxyzclwvzy .gt_center {
  text-align: center;
}

#pxyzclwvzy .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#pxyzclwvzy .gt_font_normal {
  font-weight: normal;
}

#pxyzclwvzy .gt_font_bold {
  font-weight: bold;
}

#pxyzclwvzy .gt_font_italic {
  font-style: italic;
}

#pxyzclwvzy .gt_super {
  font-size: 65%;
}

#pxyzclwvzy .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#pxyzclwvzy .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#pxyzclwvzy .gt_indent_1 {
  text-indent: 5px;
}

#pxyzclwvzy .gt_indent_2 {
  text-indent: 10px;
}

#pxyzclwvzy .gt_indent_3 {
  text-indent: 15px;
}

#pxyzclwvzy .gt_indent_4 {
  text-indent: 20px;
}

#pxyzclwvzy .gt_indent_5 {
  text-indent: 25px;
}
</style>
<div class="inline-table"><table class="gt_table">
<caption>
<span id="tab:gt-demo">Table 2.4: </span>Summary statistics for the pets dataset.</caption>
  
  <thead class="gt_col_headings">
<tr>
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col">Pet Type</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col">N</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup">
        <span class="gt_column_spanner">Means</span>
      </th>
    </tr>
<tr>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Weight</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Score</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_left">cat</td>
<td class="gt_row gt_right">300</td>
<td class="gt_row gt_right">9.37</td>
<td class="gt_row gt_right">90.24</td>
</tr>
<tr>
<td class="gt_row gt_left gt_striped">dog</td>
<td class="gt_row gt_right gt_striped">400</td>
<td class="gt_row gt_right gt_striped">19.07</td>
<td class="gt_row gt_right gt_striped">99.98</td>
</tr>
<tr>
<td class="gt_row gt_left">ferret</td>
<td class="gt_row gt_right">100</td>
<td class="gt_row gt_right">4.78</td>
<td class="gt_row gt_right">111.78</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<!-- Tab content -->
<div id="DT" class="tabcontent">
<p><a href="https://rstudio.github.io/DT/">DT</a> lets you make interactive data tables. Chapter <a href="next.html#interactive-tables">10.3.2</a> goes into more details about this type of table.</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span><span class="op">(</span><span class="va">summary_table</span>, </span>
<span>              caption <span class="op">=</span> <span class="st">"Summary statistics for the pets dataset."</span>,</span>
<span>              colnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Pet Type"</span>, <span class="st">"N"</span>, <span class="st">"Weight"</span>, <span class="st">"Score"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/formatCurrency.html">formatRound</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"mean_weight"</span>, <span class="st">"mean_score"</span><span class="op">)</span>,</span>
<span>                  digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-6a2c3f6622f6585a45c5" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-6a2c3f6622f6585a45c5">{"x":{"filter":"none","vertical":false,"caption":"<caption>Summary statistics for the pets dataset.<\/caption>","data":[["1","2","3"],["cat","dog","ferret"],[300,400,100],[9.3716129083,19.0679737427696,4.78156944173321],[90.2366666666667,99.9825,111.78]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Pet Type<\/th>\n      <th>N<\/th>\n      <th>Weight<\/th>\n      <th>Score<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":3,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"targets":4,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"className":"dt-right","targets":[2,3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render"],"jsHooks":[]}</script>
</div>
</div>
<div id="repro-figures" class="section level3" number="2.5.7">
<h3>
<span class="header-section-number">2.5.7</span> Images<a class="anchor" aria-label="anchor" href="#repro-figures"><i class="fas fa-link"></i></a>
</h3>
<p>Next, create a code chunk where you want to display an image in your document. Let's put it in the Results section. We'll use some code that you'll learn more about in the <a href="ggplot.html#ggplot">data visualisation lecture</a> to show violin-boxplots for the groups.</p>
<p>Notice how the figure caption is formatted in the chunk options.</p>
<pre><code>
```r
ggplot(pets, aes(pet, score, fill = country)) +
  geom_violin(alpha = 0.5) +
  geom_boxplot(width = 0.25, 
               position = position_dodge(width = 0.9),
               show.legend = FALSE) +
  scale_fill_manual(values = c("orange", "dodgerblue")) +
  xlab("") +
  ylab("Score") +
  theme(text = element_text(size = 20, family = "Times"))
```

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="02-repro_files/figure-html/unnamed-chunk-6-1.png" alt="Figure 1. Scores by pet type and country." width="100%" /&gt;
&lt;p class="caption"&gt;(\#fig:unnamed-chunk-6)Figure 1. Scores by pet type and country.&lt;/p&gt;
&lt;/div&gt;</code></pre>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-7"></span>
<img src="02-repro_files/figure-html/unnamed-chunk-7-1.png" alt="Figure 1. Scores by pet type and country." width="100%"><p class="caption">
Figure 2.6: Figure 1. Scores by pet type and country.
</p>
</div>
<div class="info">
<p>The last line changes the default text size and font, which can be useful for generating figures that meet a journal's requirements.</p>
</div>
<p>You can also include images that you did not create in R using the typical markdown syntax for images:</p>
<pre><code>![All the Things by [Hyperbole and a Half](http://hyperboleandahalf.blogspot.com/)](images/memes/x-all-the-things.png){style="width: 50%"}</code></pre>
<div class="figure">
<img src="images/memes/x-all-the-things.png" style="width: 50%" alt=""><p class="caption">All the Things by <a href="http://hyperboleandahalf.blogspot.com/">Hyperbole and a Half</a></p>
</div>
</div>
<div id="linked-documents" class="section level3" number="2.5.8">
<h3>
<span class="header-section-number">2.5.8</span> Linked documents<a class="anchor" aria-label="anchor" href="#linked-documents"><i class="fas fa-link"></i></a>
</h3>
<p>If you need to create longer reports with links between sections, you can edit the YAML to use an output format from the <code class="package">bookdown</code> package. <code><a href="https://pkgs.rstudio.com/bookdown/reference/html_document2.html">bookdown::html_document2</a></code> is a useful one that adds figure and table numbers automatically to any figures or tables with a caption and allows you to link to these by reference.</p>
<p>To create links to tables and figures, you need to name the code chunk that created your figures or tables, and then call those names in your inline coding:</p>
<div class="verbatim">
<pre class="sourceCode r"><code class="sourceCode R">```{r my-table}</code></pre>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># table code here</span></span></code></pre></div>
<pre class="sourceCode r"><code class="sourceCode R">```</code></pre>
</div>
<div class="verbatim">
<pre class="sourceCode r"><code class="sourceCode R">```{r my-figure}</code></pre>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># figure code here</span></span></code></pre></div>
<pre class="sourceCode r"><code class="sourceCode R">```</code></pre>
</div>
<pre><code>See Table\ \@ref(tab:my-table) or Figure\ \@ref(fig:my-figure).</code></pre>
<div class="warning">
<p>The code chunk names can only contain letters, numbers and dashes. If they contain other characters like spaces or underscores, the referencing will not work.</p>
</div>
<p>You can also link to different sections of your report by naming your headings with <code>{#}</code>:</p>
<pre><code># My first heading {#heading-1}

## My second heading {#heading-2}

See Section\ \@ref(heading-1) and Section\ \@ref(heading-2)
</code></pre>
<p>The code below shows how to link text to figures or tables in a full report using the built-in <code>diamonds</code> dataset - use your <code>reports.Rmd</code> to create this document now. You can see the <a href="demos/html_document2.html">HTML output here</a>.</p>
<div class="webex-solution">
<button>
Linked document code
</button>
<div class="sourceCode" id="cb68"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb68-1"><a href="repro.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb68-2"><a href="repro.html#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Linked Document Demo"</span></span>
<span id="cb68-3"><a href="repro.html#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> </span></span>
<span id="cb68-4"><a href="repro.html#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="co">  bookdown::html_document2:</span></span>
<span id="cb68-5"><a href="repro.html#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="co">    number_sections: true</span></span>
<span id="cb68-6"><a href="repro.html#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb68-7"><a href="repro.html#cb68-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-8"><a href="repro.html#cb68-8" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb68-9"><a href="repro.html#cb68-9" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::opts_chunk$set(echo = FALSE,</span></span>
<span id="cb68-10"><a href="repro.html#cb68-10" aria-hidden="true" tabindex="-1"></a><span class="in">                      message = FALSE,</span></span>
<span id="cb68-11"><a href="repro.html#cb68-11" aria-hidden="true" tabindex="-1"></a><span class="in">                      warning = FALSE)</span></span>
<span id="cb68-12"><a href="repro.html#cb68-12" aria-hidden="true" tabindex="-1"></a><span class="in">library(tidyverse)</span></span>
<span id="cb68-13"><a href="repro.html#cb68-13" aria-hidden="true" tabindex="-1"></a><span class="in">library(kableExtra)</span></span>
<span id="cb68-14"><a href="repro.html#cb68-14" aria-hidden="true" tabindex="-1"></a><span class="in">theme_set(theme_minimal())</span></span>
<span id="cb68-15"><a href="repro.html#cb68-15" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-16"><a href="repro.html#cb68-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-17"><a href="repro.html#cb68-17" aria-hidden="true" tabindex="-1"></a>Diamond price depends on many features, such as:</span>
<span id="cb68-18"><a href="repro.html#cb68-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-19"><a href="repro.html#cb68-19" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>cut (See Table\ \@ref(tab:by-cut))</span>
<span id="cb68-20"><a href="repro.html#cb68-20" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>colour (See Table\ \@ref(tab:by-colour))</span>
<span id="cb68-21"><a href="repro.html#cb68-21" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>clarity (See Figure\ \@ref(fig:by-clarity))</span>
<span id="cb68-22"><a href="repro.html#cb68-22" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>carats (See Figure\ \@ref(fig:by-carat))</span>
<span id="cb68-23"><a href="repro.html#cb68-23" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>See section\ \@ref(conclusion) for concluding remarks</span>
<span id="cb68-24"><a href="repro.html#cb68-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-25"><a href="repro.html#cb68-25" aria-hidden="true" tabindex="-1"></a><span class="fu">## Tables</span></span>
<span id="cb68-26"><a href="repro.html#cb68-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-27"><a href="repro.html#cb68-27" aria-hidden="true" tabindex="-1"></a><span class="fu">### Cut</span></span>
<span id="cb68-28"><a href="repro.html#cb68-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-29"><a href="repro.html#cb68-29" aria-hidden="true" tabindex="-1"></a><span class="in">```{r by-cut}</span></span>
<span id="cb68-30"><a href="repro.html#cb68-30" aria-hidden="true" tabindex="-1"></a><span class="in">diamonds %&gt;%</span></span>
<span id="cb68-31"><a href="repro.html#cb68-31" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(cut) %&gt;%</span></span>
<span id="cb68-32"><a href="repro.html#cb68-32" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(avg = mean(price),</span></span>
<span id="cb68-33"><a href="repro.html#cb68-33" aria-hidden="true" tabindex="-1"></a><span class="in">            .groups = "drop") %&gt;%</span></span>
<span id="cb68-34"><a href="repro.html#cb68-34" aria-hidden="true" tabindex="-1"></a><span class="in">  kable(digits = 0, </span></span>
<span id="cb68-35"><a href="repro.html#cb68-35" aria-hidden="true" tabindex="-1"></a><span class="in">        col.names = c("Cut", "Average Price"),</span></span>
<span id="cb68-36"><a href="repro.html#cb68-36" aria-hidden="true" tabindex="-1"></a><span class="in">        caption = "Mean diamond price by cut.") %&gt;%</span></span>
<span id="cb68-37"><a href="repro.html#cb68-37" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_material()</span></span>
<span id="cb68-38"><a href="repro.html#cb68-38" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-39"><a href="repro.html#cb68-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-40"><a href="repro.html#cb68-40" aria-hidden="true" tabindex="-1"></a><span class="fu">### Colour</span></span>
<span id="cb68-41"><a href="repro.html#cb68-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-42"><a href="repro.html#cb68-42" aria-hidden="true" tabindex="-1"></a><span class="in">```{r by-colour}</span></span>
<span id="cb68-43"><a href="repro.html#cb68-43" aria-hidden="true" tabindex="-1"></a><span class="in">diamonds %&gt;%</span></span>
<span id="cb68-44"><a href="repro.html#cb68-44" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(color) %&gt;%</span></span>
<span id="cb68-45"><a href="repro.html#cb68-45" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(avg = mean(price),</span></span>
<span id="cb68-46"><a href="repro.html#cb68-46" aria-hidden="true" tabindex="-1"></a><span class="in">            .groups = "drop") %&gt;%</span></span>
<span id="cb68-47"><a href="repro.html#cb68-47" aria-hidden="true" tabindex="-1"></a><span class="in">  kable(digits = 0, </span></span>
<span id="cb68-48"><a href="repro.html#cb68-48" aria-hidden="true" tabindex="-1"></a><span class="in">        col.names = c("Cut", "Average Price"),</span></span>
<span id="cb68-49"><a href="repro.html#cb68-49" aria-hidden="true" tabindex="-1"></a><span class="in">        caption = "Mean diamond price by colour.") %&gt;%</span></span>
<span id="cb68-50"><a href="repro.html#cb68-50" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_material()</span></span>
<span id="cb68-51"><a href="repro.html#cb68-51" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-52"><a href="repro.html#cb68-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-53"><a href="repro.html#cb68-53" aria-hidden="true" tabindex="-1"></a><span class="fu">## Plots</span></span>
<span id="cb68-54"><a href="repro.html#cb68-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-55"><a href="repro.html#cb68-55" aria-hidden="true" tabindex="-1"></a><span class="fu">### Clarity</span></span>
<span id="cb68-56"><a href="repro.html#cb68-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-57"><a href="repro.html#cb68-57" aria-hidden="true" tabindex="-1"></a><span class="in">```{r by-clarity, fig.cap = "Diamond price by clarity"}</span></span>
<span id="cb68-58"><a href="repro.html#cb68-58" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot(diamonds, aes(x = clarity, y = price)) +</span></span>
<span id="cb68-59"><a href="repro.html#cb68-59" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_boxplot() </span></span>
<span id="cb68-60"><a href="repro.html#cb68-60" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-61"><a href="repro.html#cb68-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-62"><a href="repro.html#cb68-62" aria-hidden="true" tabindex="-1"></a><span class="fu">### Carats</span></span>
<span id="cb68-63"><a href="repro.html#cb68-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-64"><a href="repro.html#cb68-64" aria-hidden="true" tabindex="-1"></a><span class="in">```{r by-carat, fig.cap = "Diamond price by carat"}</span></span>
<span id="cb68-65"><a href="repro.html#cb68-65" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot(diamonds, aes(x = carat, y = price)) +</span></span>
<span id="cb68-66"><a href="repro.html#cb68-66" aria-hidden="true" tabindex="-1"></a><span class="in">  stat_smooth()</span></span>
<span id="cb68-67"><a href="repro.html#cb68-67" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb68-68"><a href="repro.html#cb68-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-69"><a href="repro.html#cb68-69" aria-hidden="true" tabindex="-1"></a><span class="fu">### Concluding remarks {#conclusion}</span></span>
<span id="cb68-70"><a href="repro.html#cb68-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-71"><a href="repro.html#cb68-71" aria-hidden="true" tabindex="-1"></a>I am not rich enough to worry about any of this.</span></code></pre></div>
</div>
<p>This format defaults to numbered sections, so set <code>number_sections: false</code> in the <a class="glossary" target="_blank" title="A structured format for information" href="https://psyteachr.github.io/glossary/y#yaml">YAML</a> header if you don't want this. If you remove numbered sections, links like <code>\@ref(conclusion)</code> will show "??", so you need to use URL link syntax instead, like this:</p>
<pre><code>See the [last section](#conclusion) for concluding remarks.</code></pre>
</div>
<div id="bibliography" class="section level3" number="2.5.9">
<h3>
<span class="header-section-number">2.5.9</span> Bibliography<a class="anchor" aria-label="anchor" href="#bibliography"><i class="fas fa-link"></i></a>
</h3>
<p>There are several ways to do in-text references and automatically generate a <a href="https://bookdown.org/yihui/rmarkdown-cookbook/bibliography.html" target="_blank">bibliography</a> in R Markdown. Markdown files need to link to a BibTex file (a plain text file with references in a specific format) that contains the references you need to cite. You specify the name of this file in the YAML header, like <code>bibliography: refs.bib</code> and cite references in text using an at symbol and a shortname, like <code>[@tidyverse]</code>. You can also include a "csl" style file to format your references in, for example, APA style.</p>
<pre><code>---
title: "My Paper"
author: "Me"
output: 
  html_document:
    toc: true
bibliography: refs.bib
csl: apa.csl</code></pre>
<div id="converting-from-reference-software" class="section level4" number="2.5.9.1">
<h4>
<span class="header-section-number">2.5.9.1</span> Converting from reference software<a class="anchor" aria-label="anchor" href="#converting-from-reference-software"><i class="fas fa-link"></i></a>
</h4>
<p>Most reference software like EndNote, Zotero or Mendeley have exporting options that can export to BibTeX format. You just need to check the shortnames in the resulting file.</p>
</div>
<div id="creating-a-bibtex-file" class="section level4" number="2.5.9.2">
<h4>
<span class="header-section-number">2.5.9.2</span> Creating a BibTeX File<a class="anchor" aria-label="anchor" href="#creating-a-bibtex-file"><i class="fas fa-link"></i></a>
</h4>
<p>Most reference software like EndNote, Zotero or Mendeley have exporting options that can export to BibTeX format. You just need to check the shortnames in the resulting file.</p>
<p>You can also make a BibTeX file and add references manually. In RStudio, go to <strong><code>File</code></strong> &gt; <strong><code>New File...</code></strong> &gt; <strong><code>Text File</code></strong> and save the file as "bibliography.bib".</p>
<p>Next, add the line <code>bibliography: bibliography.bib</code> to your YAML header.</p>
</div>
<div id="citations" class="section level4" number="2.5.9.3">
<h4>
<span class="header-section-number">2.5.9.3</span> Adding references<a class="anchor" aria-label="anchor" href="#citations"><i class="fas fa-link"></i></a>
</h4>
<p>You can add references to a journal article in the following format:</p>
<pre><code>@article{shortname,
  author = {Author One and Author Two and Author Three},
  title = {Paper Title},
  journal = {Journal Title},
  volume = {vol},
  number = {issue},
  pages = {startpage--endpage},
  year = {year},
  doi = {doi}
}</code></pre>
<p>See <a href="https://www.bibtex.com/g/bibtex-format/" target="_blank">A complete guide to the BibTeX format</a> for instructions on citing books, technical reports, and more.</p>
<p>You can get the reference for an R package using the functions <code><a href="https://rdrr.io/r/utils/citation.html">citation()</a></code> and <code><a href="https://rdrr.io/r/utils/toLatex.html">toBibtex()</a></code>. You can paste the bibtex entry into your bibliography.bib file. Make sure to add a short name (e.g., "ggplot2") before the first comma to refer to the reference.</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html">citation</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"ggplot2"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/toLatex.html">toBibtex</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>## @Book{,
##   author = {Hadley Wickham},
##   title = {ggplot2: Elegant Graphics for Data Analysis},
##   publisher = {Springer-Verlag New York},
##   year = {2016},
##   isbn = {978-3-319-24277-4},
##   url = {https://ggplot2.tidyverse.org},
## }</code></pre>
<p><a href="https://scholar.google.com/">Google Scholar</a> entries have a BibTeX citation option. This is usually the easiest way to get the relevant values, although you have to add the DOI yourself. You can keep the suggested shortname or change it to something that makes more sense to you.</p>
<div class="inline-figure"><img src="images/present/google-scholar.png" width="100%" style="display: block; margin: auto;"></div>
<p>Some journal websites also let you download citations in bibtex format. For example, go to the publisher's page for <a href="https://journals.sagepub.com/doi/abs/10.1177/2515245918770963" target="_blank">Equivalence Testing for Psychological Research: A Tutorial</a>, click on the Cite button (in the sidebar or under the bottom Explore More menu), choose BibTeX format, and download the citation. You can open up the file in a text editor and copy the text. It should look like this:</p>
<pre><code>@article{doi:10.1177/2515245918770963,
author = {Daniël Lakens and Anne M. Scheel and Peder M. Isager},
title ={Equivalence Testing for Psychological Research: A Tutorial},
journal = {Advances in Methods and Practices in Psychological Science},
volume = {1},
number = {2},
pages = {259-269},
year = {2018},
doi = {10.1177/2515245918770963},

URL = { 
        https://doi.org/10.1177/2515245918770963
    
},
eprint = { 
        https://doi.org/10.1177/2515245918770963
    
}
,
    abstract = { Psychologists must be able to test both for the presence of an effect and for the absence of an effect. In addition to testing against zero, researchers can use the two one-sided tests (TOST) procedure to test for equivalence and reject the presence of a smallest effect size of interest (SESOI). The TOST procedure can be used to determine if an observed effect is surprisingly small, given that a true effect at least as extreme as the SESOI exists. We explain a range of approaches to determine the SESOI in psychological science and provide detailed examples of how equivalence tests should be performed and reported. Equivalence tests are an important extension of the statistical tools psychologists currently use and enable researchers to falsify predictions about the presence, and declare the absence, of meaningful effects. }
}</code></pre>
<p>Paste the reference into your bibliography.bib file. Change <code>doi:10.1177/2515245918770963</code> in the first line of the reference to a shortname you will use to cite the reference in your manuscript. We'll use <code>TOSTtutorial</code>.</p>
</div>
<div id="references" class="section level4" number="2.5.9.4">
<h4>
<span class="header-section-number">2.5.9.4</span> Citing references<a class="anchor" aria-label="anchor" href="#references"><i class="fas fa-link"></i></a>
</h4>
<p>You can cite references in text like this:</p>
<pre><code>This tutorial uses several R packages [@tidyverse;@rmarkdown].</code></pre>
<p>This tutorial uses several R packages <span class="citation">(<a href="webpages.html#ref-rmarkdown" role="doc-biblioref">Allaire et al., 2018</a>; <a href="webpages.html#ref-tidyverse" role="doc-biblioref">Wickham, 2017</a>)</span>.</p>
<p>Put a minus in front of the @ if you just want the year:</p>
<pre><code>Lakens, Scheel and Isengar [-@TOSTtutorial] wrote a tutorial explaining how to test for the absence of an effect.</code></pre>
<p>Lakens, Scheel and Isengar <span class="citation">(<a href="webpages.html#ref-TOSTtutorial" role="doc-biblioref">2018</a>)</span> wrote a tutorial explaining how to test for the absence of an effect.</p>
</div>
<div id="uncited-references" class="section level4" number="2.5.9.5">
<h4>
<span class="header-section-number">2.5.9.5</span> Uncited references<a class="anchor" aria-label="anchor" href="#uncited-references"><i class="fas fa-link"></i></a>
</h4>
<p>If you want to add an item to the reference section without citing, it, add it to the YAML header like this:</p>
<pre><code>nocite: |
  @ref1, @ref2, @ref3</code></pre>
<p>Or add all of the items in the .bib file like this:</p>
<pre><code>nocite: '@*'</code></pre>
</div>
<div id="citation-styles" class="section level4" number="2.5.9.6">
<h4>
<span class="header-section-number">2.5.9.6</span> Citation Styles<a class="anchor" aria-label="anchor" href="#citation-styles"><i class="fas fa-link"></i></a>
</h4>
<p>You can search a <a href="https://www.zotero.org/styles" target="_blank">list of style files</a> for various journals and download a file that will format your bibliography for a specific journal's style. You'll need to add the line <code>csl: filename.csl</code> to your YAML header.</p>
<div class="try">
<p>Add some citations to your bibliography.bib file, reference them in your text, and render your manuscript to see the automatically generated reference section. Try a few different citation style files.</p>
</div>
</div>
<div id="reference-section" class="section level4" number="2.5.9.7">
<h4>
<span class="header-section-number">2.5.9.7</span> Reference Section<a class="anchor" aria-label="anchor" href="#reference-section"><i class="fas fa-link"></i></a>
</h4>
<p>By default, the reference section is added to the end of the document. If you want to change the position (e.g., to add figures and tables after the references), include <code>&lt;div id="refs"&gt;&lt;/div&gt;</code> where you want the references.</p>
<div class="try">
<p>Add in-text citations and a reference list to your report.</p>
</div>
</div>
</div>
<div id="custom-templates" class="section level3" number="2.5.10">
<h3>
<span class="header-section-number">2.5.10</span> Custom Templates<a class="anchor" aria-label="anchor" href="#custom-templates"><i class="fas fa-link"></i></a>
</h3>
<p>Some packages provide custom R Markdown templates. <code>reprores</code> has a Report template that shows all of the possible options in the YAML header, has bibliography and style files, and explains how to set up linked figures and tables. Because it contains multiple files, RStudio will ask you to create a new folder to keep all of the files in.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:img-custom-rmd"></span>
<img src="images/custom-rmd.png" alt="The custom R markdown temlate from reprores." width="50%"><p class="caption">
Figure 2.7: The custom R markdown temlate from reprores.
</p>
</div>
<div class="try">
<p>Start a report with the Report template and knit it. Try changing or deleting options.</p>
</div>
</div>
</div>
<div id="glossary-repro" class="section level2" number="2.6">
<h2>
<span class="header-section-number">2.6</span> Glossary<a class="anchor" aria-label="anchor" href="#glossary-repro"><i class="fas fa-link"></i></a>
</h2>
<div class="inline-table"><table class="table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
term
</th>
<th style="text-align:left;">
definition
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/a.html#absolute-path" class="glossary" target="_blank">absolute path</a>
</td>
<td style="text-align:left;">
A file path that starts with / and is not appended to the working directory
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/c.html#chunk" class="glossary" target="_blank">chunk</a>
</td>
<td style="text-align:left;">
A section of code in an R Markdown file
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/d.html#directory" class="glossary" target="_blank">directory</a>
</td>
<td style="text-align:left;">
A collection or "folder" of files on a computer.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/e.html#extension" class="glossary" target="_blank">extension</a>
</td>
<td style="text-align:left;">
The end part of a file name that tells you what type of file it is (e.g., .R or .Rmd).
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/k.html#knit" class="glossary" target="_blank">knit</a>
</td>
<td style="text-align:left;">
To create an HTML, PDF, or Word document from an R Markdown (Rmd) document
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/m.html#markdown" class="glossary" target="_blank">markdown</a>
</td>
<td style="text-align:left;">
A way to specify formatting, such as headers, paragraphs, lists, bolding, and links.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/p.html#path" class="glossary" target="_blank">path</a>
</td>
<td style="text-align:left;">
A string representing the location of a file or directory.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/p.html#project" class="glossary" target="_blank">project</a>
</td>
<td style="text-align:left;">
A way to organise related files in RStudio
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/r.html#r-markdown" class="glossary" target="_blank">r markdown</a>
</td>
<td style="text-align:left;">
The R-specific version of markdown: a way to specify formatting, such as headers, paragraphs, lists, bolding, and links, as well as code blocks and inline code.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/r.html#relative-path" class="glossary" target="_blank">relative path</a>
</td>
<td style="text-align:left;">
The location of a file in relation to the working directory.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/r.html#reproducibility" class="glossary" target="_blank">reproducibility</a>
</td>
<td style="text-align:left;">
The extent to which the findings of a study can be repeated in some other context
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/w.html#working-directory" class="glossary" target="_blank">working directory</a>
</td>
<td style="text-align:left;">
The filepath where R is currently reading and writing files.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/y.html#yaml" class="glossary" target="_blank">yaml</a>
</td>
<td style="text-align:left;">
A structured format for information
</td>
</tr>
</tbody>
</table></div>
</div>
<div id="resources-repro" class="section level2" number="2.7">
<h2>
<span class="header-section-number">2.7</span> Further Resources<a class="anchor" aria-label="anchor" href="#resources-repro"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>
<a href="http://r4ds.had.co.nz/r-markdown.html">Chapter 27: R Markdown</a> in <em>R for Data Science</em>
</li>
<li><a href="https://github.com/rstudio/cheatsheets/raw/master/rmarkdown.pdf">R Markdown Cheat Sheet</a></li>
<li><a href="https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf">R Markdown reference Guide</a></li>
<li><a href="https://rmarkdown.rstudio.com/lesson-1.html">R Markdown Tutorial</a></li>
<li>
<a href="https://bookdown.org/yihui/rmarkdown/">R Markdown: The Definitive Guide</a> by Yihui Xie, J. J. Allaire, &amp; Garrett Grolemund</li>
<li>
<a href="https://slides.djnavarro.net/project-structure/">Project Structure</a> by Danielle Navarro</li>
<li>
<a href="https://speakerdeck.com/jennybc/how-to-name-files">How to name files</a> by Jenny Bryan</li>
<li>
<a href="https://crsh.github.io/papaja_man/">Papaja</a> Reproducible APA Manuscripts</li>
<li><a href="https://the-turing-way.netlify.app/">The Turing Way</a></li>
</ul>
</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;

    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    $(solveme[i]).after(" <span class='webex-icon'></span>");
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    $(selects[i]).after(" <span class='webex-icon'></span>");
  }

  update_total_correct();
}

</script><script>
$( document ).ready(function() {
  var cite = ' ';
  var psyteachr = ' <a href="https://psyteachr.github.io/"><img src="images/logos/psyTeachR_logo.png" style="height: 31px; color: white;" alt="psyTeachR: Reproducible Research" /></a>';
  var license = ' <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>';

  $("footer div.row div:eq(1) p").html(
    psyteachr + license + cite
  );

  function move_sidebar() {
    var w = window.innerWidth;
    if (w < 992) {
      $("#toc").appendTo($("#main-nav"));
    } else {
      $("#toc").appendTo($("div.sidebar-chapter"));
    }
  }
  move_sidebar();
  window.onresize = move_sidebar;
});


function openCity(evt, cityName) {
  // Declare all variables
  var i, tabcontent, tablinks;

  // Get all elements with class="tabcontent" and hide them
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  // Get all elements with class="tablinks" and remove the class "active"
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }

  // Show the current tab, and add an "active" class to the button that opened the tab
  document.getElementById(cityName).style.display = "block";
  evt.currentTarget.className += " active";
} 

</script><div class="chapter-nav">
<div class="prev"><a href="intro.html"><span class="header-section-number">1</span> Getting Started</a></div>
<div class="next"><a href="ggplot.html"><span class="header-section-number">3</span> Data Visualisation</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#repro"><span class="header-section-number">2</span> Reproducible Workflows</a></li>
<li><a class="nav-link" href="#ilo-repro"><span class="header-section-number">2.1</span> Learning Objectives</a></li>
<li><a class="nav-link" href="#setup-repro"><span class="header-section-number">2.2</span> Setup</a></li>
<li><a class="nav-link" href="#why-learn-reproducible-reports"><span class="header-section-number">2.3</span> Why learn reproducible reports?</a></li>
<li>
<a class="nav-link" href="#projects"><span class="header-section-number">2.4</span> Organising a project</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#file-system"><span class="header-section-number">2.4.1</span> File System</a></li>
<li><a class="nav-link" href="#working-directory"><span class="header-section-number">2.4.2</span> Working Directory</a></li>
<li><a class="nav-link" href="#naming-things"><span class="header-section-number">2.4.3</span> Naming Things</a></li>
<li><a class="nav-link" href="#new-project"><span class="header-section-number">2.4.4</span> Start a Project</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#r-markdown"><span class="header-section-number">2.5</span> R Markdown</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#yaml"><span class="header-section-number">2.5.1</span> YAML Header</a></li>
<li><a class="nav-link" href="#setup"><span class="header-section-number">2.5.2</span> Setup</a></li>
<li><a class="nav-link" href="#structure"><span class="header-section-number">2.5.3</span> Structure</a></li>
<li><a class="nav-link" href="#code-chunks"><span class="header-section-number">2.5.4</span> Code Chunks</a></li>
<li><a class="nav-link" href="#inline-r"><span class="header-section-number">2.5.5</span> In-line R</a></li>
<li><a class="nav-link" href="#repro-tables"><span class="header-section-number">2.5.6</span> Tables</a></li>
<li><a class="nav-link" href="#repro-figures"><span class="header-section-number">2.5.7</span> Images</a></li>
<li><a class="nav-link" href="#linked-documents"><span class="header-section-number">2.5.8</span> Linked documents</a></li>
<li><a class="nav-link" href="#bibliography"><span class="header-section-number">2.5.9</span> Bibliography</a></li>
<li><a class="nav-link" href="#custom-templates"><span class="header-section-number">2.5.10</span> Custom Templates</a></li>
</ul>
</li>
<li><a class="nav-link" href="#glossary-repro"><span class="header-section-number">2.6</span> Glossary</a></li>
<li><a class="nav-link" href="#resources-repro"><span class="header-section-number">2.7</span> Further Resources</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/psyteachr/reprores-v3/blob/master/book/02-repro.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/psyteachr/reprores-v3/edit/master/book/02-repro.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Data Skills for Reproducible Research</strong>: <br><a href="https://doi.org/10.5281/zenodo.6527194"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.6527194.svg" alt="DOI: 10.5281/zenodo.6527194"></a>" was written by . It was last built on 2022-09-06.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
